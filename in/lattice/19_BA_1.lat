define lattice; ringtype = 1;

Energy = 3.0;

dP = 1e-8; CODeps = 1e-14;

Meth = 4; Nbend = 10; Nquad = 10; Nsext = 2;

pi = 4.0*arctan(1.0);

c0 = 2.99792458e8; h_rf = 176; C = 528.0; Brho = 1e9*Energy/c0;

cav: Cavity, Frequency = c0/C*h_rf, Voltage = 1.8e6, Harnum = h_rf;

bpm: beam position monitor;

chv: multipole, N=1, Method = Meth;


l1:  drift, l = 0.1;
l2h: drift, l = 0.1;
l4:  drift, l = 0.254311;
l5h: drift, l = 0.856190/2.0;
ls:  drift, l = 2.500000;
l6:  drift, l = 0.173080;
l3h: drift, l = 0.030029;

{ Cell tune [14/6, 1/6]. }
bh: bending, l = 0.166667, t = 0.5, k = -7.009950, t1 = 0.0, t2 = 0.0,
      gap = 0.0, N = Nbend, Method = Meth;
qf:  quadrupole, l = 0.075, k = 21.889700, N = Nquad, Method = Meth;

bm: bending, l = 0.166667, t = 0.5, k = -3.000000, t1 = 0.0, t2 = 0.0,
     gap = 0.00, N = Nbend, Method = Meth;
qfe: quadrupole, l = 0.1,  k =  23.402022, N = Nquad, Method = Meth;
qde: quadrupole, l = 0.1,  k = -19.788989, N = Nquad, Method = Meth;
qm:  quadrupole, l = 0.15, k =  18.290790, N = Nquad, Method = Meth;

sf:  sextupole, l = 0.0, k =  139.70554, N = Nsext, Method = Meth;
sd:  sextupole, l = 0.0, k = -172.11743, N = Nsext, Method = Meth;

o1: multipole, l = 0.0, HOM = (4, 0.0, 0.0), N = Nsext, Method = Meth;
o2: multipole, l = 0.0, HOM = (4, 0.0, 0.0), N = Nsext, Method = Meth;
o3: multipole, l = 0.0, HOM = (4, 0.0, 0.0), N = Nsext, Method = Meth;

start: marker;

uc_h: sf, l1, qf, l2h, l2h, sd, bh;
uc :  inv(uc_h), uc_h;

ms: ls, bpm, chv, o1, qfe, l3h, l3h, o2, qde, l4, o3, bm, l5h, l5h, qm, l6,
    bh;

sc: ms, bpm, chv, 16*(1*uc, bpm, chv), inv(ms);

{line: 1*uc, cav;}

{line: inv(ms);}

line: 20*sc, cav;

cell: line, symmetry = 1;

end;
